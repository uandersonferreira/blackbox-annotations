<!DOCTYPE html>
<html lang="pt-BR"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Head</title>
    <!--My Css -->
    <link rel="stylesheet" href="/css/style_layout.css">
    <!-- <link rel="stylesheet" href="/css/style_menuPagination.css">-->
    <link rel="stylesheet" href="/css/style_form_funcionarios.css">
    <link rel="stylesheet" href="/css/style_editor_text.css">
    <link rel="stylesheet" href="/css/style_list_post.css">

    <!-- Box Icons  -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <!-- bootstrap -->
    <link rel="stylesheet" href="/webjars/bootstrap/5.3.0/css/bootstrap.min.css">
    <!-- font-awesome -->
    <link rel="stylesheet" href="/webjars/font-awesome/6.4.0/css/all.css">


    <!-- TinyMCE CDN -->
    <script src="https://cdn.tiny.cloud/1/0ay3sij1cm0sdyn1bm3r95jrnhisbwg8kguyvxh82yqsmh4x/tinymce/6/tinymce.min.js"
            referrerpolicy="origin"></script>
    <script>
        tinymce.init({
            selector: 'textarea#editor',
            spellchecker_languages: 'US English=en_US,UK English=en_GB,Danish=da,Dutch=nl,Finnish=fi,French=fr,German=de,Italian=it,Norwegian=nb,Brazilian Portuguese=pt,Iberian Portuguese=pt_PT,Spanish=es,Swedish=sv',
            skin: 'fabric',
            content_css: 'fabric',
            toolbar_mode: 'floating',
            // plugins: 'advlist anchor autolink charmap code codesample directionality help hr image imagetools insertdatetime link lists media nonbreaking pagebreak preview print searchreplace table template textpattern toc visualblocks wordcount',
            // toolbar: 'undo redo | formatselect | bold italic strikethrough forecolor backcolor blockquote | link image media | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | removeformat',
            height: 450,

            /* plugin */
            plugins: [
                "advlist autolink link image lists charmap print preview hr anchor pagebreak",
                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
                "save table contextmenu directionality emoticons template paste textcolor"
            ],

            /* toolbar */
            toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons",


            /* style */
            style_formats: [
                {title: "Headers", items: [
                        {title: "Header 1", format: "h1"},
                        {title: "Header 2", format: "h2"},
                        {title: "Header 3", format: "h3"},
                        {title: "Header 4", format: "h4"},
                        {title: "Header 5", format: "h5"},
                        {title: "Header 6", format: "h6"}
                    ]},
                {title: "Inline", items: [
                        {title: "Bold", icon: "bold", format: "bold"},
                        {title: "Italic", icon: "italic", format: "italic"},
                        {title: "Underline", icon: "underline", format: "underline"},
                        {title: "Strikethrough", icon: "strikethrough", format: "strikethrough"},
                        {title: "Superscript", icon: "superscript", format: "superscript"},
                        {title: "Subscript", icon: "subscript", format: "subscript"},
                        {title: "Code", icon: "code", format: "code"}
                    ]},
                {title: "Blocks", items: [
                        {title: "Paragraph", format: "p"},
                        {title: "Blockquote", format: "blockquote"},
                        {title: "Div", format: "div"},
                        {title: "Pre", format: "pre"}
                    ]},
                {title: "Alignment", items: [
                        {title: "Left", icon: "alignleft", format: "alignleft"},
                        {title: "Center", icon: "aligncenter", format: "aligncenter"},
                        {title: "Right", icon: "alignright", format: "alignright"},
                        {title: "Justify", icon: "alignjustify", format: "alignjustify"}
                    ]}
            ],

            images_upload_handler: function (blobInfo, success, failure) {
                var xhr, formData;

                xhr = new XMLHttpRequest();
                xhr.withCredentials = false;
                xhr.open('POST', 'http://localhost:8080/upload/image');

                xhr.onload = function () {
                    var json;

                    if (xhr.status != 200) {
                        failure('HTTP Error: ' + xhr.status);
                        return;
                    }

                    json = xhr.responseText;
                    success(json);
                };


                formData = new FormData();
                formData.append('file', blobInfo.blob(), blobInfo.filename());

                xhr.send(formData);
            },

            /* enable title field in the Image dialog*/
            image_title: true,

            /* enable automatic uploads of images represented by blob or data URIs*/
            automatic_uploads: true,

            /*Here we add custom filepicker only to Image dialog*/
            file_picker_types: 'image',

            /* and here's our custom image picker*/
            file_picker_callback: function (cb, value, meta) {
                var input = document.createElement('input');
                input.setAttribute('type', 'file');
                input.setAttribute('accept', 'image/*');

                input.onchange = function () {
                    var file = this.files[0];
                    var reader = new FileReader();

                    reader.onload = function () {
                        /*
                        Note: Now we need to register the blob in TinyMCEs image blob
                        registry. In the next release this part hopefully won't be
                        necessary, as we are looking to handle it internally.
                        */
                        var id = 'blobid' + (new Date()).getTime();
                        var blobCache =  tinymce.activeEditor.editorUpload.blobCache;
                        var base64 = reader.result.split(',')[1];

                        var blobInfo = blobCache.create(id, file, base64);
                        blobCache.add(blobInfo);

                        /* call the callback and populate the Title field with the file name */
                        cb(blobInfo.blobUri(), { title: file.name });
                    };

                    reader.readAsDataURL(file);
                };

                input.click();
            }





        });

    </script>
</head>

<body>
<header th:replace="~{fragments/_header :: header}"></header>

<!-- ============= Home Section =============== -->
<section class="home">
    <aside th:replace="~{fragments/_menuTop ::menuTop}"></aside>
    <main class="layout-content " layout:fragment="corpo">
        <h1>
            This main content will be decorated by the actual page returned
            in the controller methods.
        </h1>
    </main>
</section>
<footer th:replace="~{fragments/_footer :: footer}"></footer>



<!-- My - JS -->
<script src="/js/script_layout.js"></script>
<script src="/js/date_time.js"></script>

<!-- jquery , Popper.js , Bootstrap  -->
<script src="/webjars/jquery/3.6.4/jquery.js"></script>
<script src="/webjars/jquery-mask-plugin/1.14.16/dist/jquery.mask.js"></script>
<script src="/webjars/popper.js/2.9.3/umd/popper.js"></script>
<script src="/webjars/bootstrap/5.3.0/js/bootstrap.js"></script>
<script src="/webjars/font-awesome/6.4.0/js/all.js"></script>


<script>

    $(document).ready(function () {
        // limpar o campo de pesquisa
        $("#btnClear").on("click", function (e) {
            e.preventDefault();
            $("#keyword").text("");
            window.location = "[[@{/v1/app/cpd/funcionarios/list}]]";
        });

    });

</script>
</body>
</html>